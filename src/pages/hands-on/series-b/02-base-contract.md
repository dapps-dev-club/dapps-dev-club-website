---
templateKey: about-page
title: Base Contract - Smart Contract Development Patterns
date: 2020-02-11T10:36:00.000Z
updatedDate: 2020-02-11T10:36:00.000Z
draft: false
description: "Base contract. The second hands-on workshop in a series about smart contract development patterns: Ownable, pausable, and non-fungible token"
section: "hands-on"
authors:
  - bguiz
tags:
  - hands-on
---

WIP!

## Recap

In the previous workshop, we set up a project using
npm, Truffle, and Ganache.
Thus far, we have only had one default smart contract,
generated by Truffle.

In this workshop, we will create our own smart contract,
which will be the "base contract" used during the remainder
of the workshops in this series.

## Design specifications

Here are the design specifications for this smart contract.

- Name: Bolsillo Monstruos
- Each account can create a **Mon** in a 2 step process
  1. Create the Mon with a random "seed" for its genes. This account must pay an amount to the smart contract do so.
  2. Birth the Mon that was created earlier, after waiting a certain amount of time. The wait is to ensure randomisation of the new Mon's genes.
- Two accounts can reproduce Mons that they own, in a 2 step process
  1. The initiator account can send a "mate request" to the acceptor account. The initiating account must pay an amount to the smart contract do so.
  2. The acceptor account may then either accept or reject this mate request.
    - The acceptor rejects: The mate request is forgotten, and a partial amount previously paid by the initiator is paid to the acceptor, with the smart contract retaining the remainder.
    - The acceptor accepts: After waiting a certain amount of time. The genes of the initiator's Mon and the acceptor's Mon are spliced together, in a manner inspired by DNA in biology, and creates + births a new Mon that probabilistically has half of each of its parent Mons' genes. The wait is to ensure randomisation of the splicing process. The mate request is is fulfilled, and a partial amount previously paid by the initiator is paid to the acceptor, with the smart contract retaining the remainder
- This contract may designate an owner
  - The owner can withdraw funds stored by the smart contract
  - The owner can pause a subset of the functions of this smart contract
- One account may send a Mon that it owns to another account.

## Implementation plan

In this workshop, we will:

- Create a new smart contract, `Bolsilmon.sol`
- Create a Truffle deployment for the `Bolsilmon` smart contract
- Define a `struct` named `Mon` to represent each Mon
- Define mappings and related state variables to track the Mons' creations and births
- Define a `createMon` function for the first step in the Mon creation process
- Define a `birthMon` function for the second step in the Mon creation process
- Define a `struct` named `MonMate` to represent each mate request
- Define mappings and related state variables to track the mate requests
- Define a `mateRequest` function for the first step in the mate process, to be called by the initiator
- Define a `geneSplice` function to compute the randomised genes, for internal use in the mate process
- Define a `mateAccept` function for the second step in the mate process, to be called by the acceptor
- Define a `mateReject` function for the alternative second step in the mate process, to be called by the acceptor
- Define an `ownerWithdrawal` function that enables the fees collected by the smart contract to be withdrawn by its owner

In subsequent workshops, we will:

- Create a new smart contract, `Ownable.sol`
- This implements the `Ownable` pattern
  - Allows for ownership to be transferred, and accepted
  - Paves the way for future restrictions that certain function invocations may only be performed by its owner
- Modify the `Bolsilmon` contract to be `Ownable`
- Create a new smart contract, `Pausable.sol`
- This implements the `Pausable` pattern
  - Allows the owner, exclusively, toggle the paused state
  - Paves the way for future restrictions that certain functions invocations may only be performed by its owner
- Modify the `Bolsilmon` contract to be `Pausable`, which in turn is still `Ownable`
- Modify `Bolsilmon` to import `ERC721` from Open Zeppelin
- This implements the ERC721 non-fungible token specification
- Modify existing functions to represent Mons as non-fungible tokens, and enable them to be transferred between accounts

## Quick Links

This workshop is part of a series:

- [Start here](../01-start-here/)
- [Base contract](../02-base-contract/) &hellip; You are here.
- [Ownable](../03-ownable/)
- [Pausable](../04-pausable/)
- [Non-fungible token](../05-non-fungible-token/)
